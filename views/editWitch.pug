extends layout

block content
    .mb-6
        span.text-xs.text-gray-400.uppercase.font-medium Edit Witch
        h1.text-4xl.font-black.uppercase.tracking-tight EDIT WITCH
    
    form.bg-white.border-2.border-black(method='post', action='/edit-witch/' + witch._id)
        .p-4.border-b-2.border-black.flex.flex-col.md_flex-row.md_items-center.gap-2
            label.text-xs.text-gray-400.uppercase.w-32.font-medium(for='name') Name
            input.border-2.border-black.px-3.py-2.flex-1(type='text', name='name', id='name', required, value=witch.name)
        
        .p-4.border-b-2.border-black.flex.flex-col.md_flex-row.md_items-center.gap-2
            label.text-xs.text-gray-400.uppercase.w-32.font-medium(for='barrierType') Barrier
            select.border-2.border-black.px-3.py-2(name='barrierType', id='barrierType', required)
                each opt in ['Labyrinth', 'Pocket', 'Reality', 'Other']
                    option(value=opt, selected=(witch.barrierType === opt))= opt
        
        .p-4.border-b-2.border-black.flex.flex-col.md_flex-row.md_items-center.gap-2
            label.text-xs.text-gray-400.uppercase.w-32.font-medium(for='dangerLevel') Danger Level
            input.border-2.border-black.px-3.py-2.w-24(type='number', name='dangerLevel', id='dangerLevel', min=1, max=10, value=witch.dangerLevel)
        
        .p-4.border-b-2.border-black.flex.items-center.gap-4
            label.text-xs.text-gray-400.uppercase.w-32.font-medium(for='defeated') Defeated
            input.w-5.h-5(type='checkbox', name='defeated', id='defeated', checked=witch.defeated)
        
        .p-4.border-b-2.border-black.flex.flex-col.md_flex-row.md_items-center.gap-2
            label.text-xs.text-gray-400.uppercase.w-32.font-medium(for='magicalGirl') Origin MG
            select.border-2.border-black.px-3.py-2(name='magicalGirl', id='magicalGirl')
                option(value='') â€” None
                each mg in magicalgirls
                    option(value=mg._id, selected=(witch.magicalGirl && (witch.magicalGirl._id ? witch.magicalGirl._id.toString() : witch.magicalGirl.toString()) === mg._id.toString()))= mg.name
        
        .p-4.border-b-2.border-black.flex.flex-col.md_flex-row.md_items-center.gap-2
            label.text-xs.text-gray-400.uppercase.w-32.font-medium(for='firstAppearance') First Seen
            input.border-2.border-black.px-3.py-2(type='date', name='firstAppearance', id='firstAppearance', value=(witch.firstAppearance ? new Date(witch.firstAppearance).toISOString().slice(0,10) : ''))
        
        .p-4.flex.gap-2
            a.bg-gray-200.px-4.py-2.text-sm.uppercase.font-semibold.hover_bg-gray-300(href='/witch/' + witch._id) Cancel
            button.bg-purple-600.text-white.px-4.py-2.text-sm.uppercase.font-semibold.hover_bg-black(type='submit') Update
